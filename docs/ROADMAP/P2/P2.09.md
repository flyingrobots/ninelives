---
id: P2.09
title: ControlPlaneRouter skeleton (auth, dispatch, history)
estimate: 2h
status: closed
blocked_by:
- P2.08
- P6.01a
blocks:
- P2.10
- P2.11
- P2.12
- P2.13
- P2.14a
- P2.16a
- P2.17
- P2.18
- P2.19
value: null
---
# [P2.09] ControlPlaneRouter skeleton (auth, dispatch, history)

## Summary

Implement ControlPlaneRouter skeleton: auth, dispatch to handler, history append.

## Steps
1. Add auth pass/fail coverage
2. Dispatch to handler and record history
3. Handle errors consistently

## Ready When
- [ ] Auth success/failure tests pass
- [ ] History records executed commands

## Test Plan

### Unit Tests
- [ ] Auth failure short-circuits handler
- [ ] Successful command calls handler and appends history
- [ ] Handler error propagates as CommandError::Handler

### Integration Tests
- [ ] End-to-end with PassthroughAuth + mock handler records meta in history

### End-to-end Tests
- N/A

---
id: P2.14a
title: Transport Trait & Envelope
estimate: 2h
status: closed
blocked_by:
- P2.09
blocks:
- P2.14b
value: H
---
# [P2.14a] Transport Trait & Envelope

## Summary

Define the core `Transport` trait and the `TransportEnvelope` data structure. This is the contract that allows the control plane to be protocol-agnostic.

## Steps
1.  Create [`src/control/transport.rs`](src/control/transport.rs).
2.  Define `TransportEnvelope` (id, command name, args, auth payload).
3.  Define `Transport` trait with `decode`, `encode`, and `map_error` methods.
4.  Document the wire format (canonical JSON) in [`docs/ADR-004-transport-formats.md`](docs/ADR-004-transport-formats.md).

## Definition of Done
- [ ] `Transport` trait defined.
- [ ] `TransportEnvelope` struct defined with `serde`.
- [ ] ADR-004 created.

## Test Plan
- [ ] Unit tests for `TransportEnvelope` serialization.

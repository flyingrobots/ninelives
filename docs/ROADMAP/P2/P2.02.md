---
id: P2.02
title: Adaptive RwLock feature flag parity
estimate: 1h
status: closed
blocked_by: []
blocks: []
value: null
---
# [P2.02] Adaptive RwLock feature flag parity

## Summary

Provide adaptive-rwlock feature for DynamicConfig using RwLock backend with parity to ArcSwap API.

## Steps
1. Add cfg(feature=adaptive-rwlock) unit tests for get/set/update
2. Ensure type is Send+Sync under feature
3. Document feature switch and tradeoffs

## Ready When
- [ ] Tests pass under adaptive-rwlock feature
- [ ] Docs describe RwLock vs ArcSwap choice

## Test Plan

### Unit Tests
- [ ] With adaptive-rwlock enabled, get/set/update behave and write exclusivity enforced (set blocks concurrent set)
- [ ] Concurrent readers succeed (shared read lock)
- [ ] Type is Send + Sync under feature

### Integration Tests
- [ ] CI step: cargo test --features adaptive-rwlock

### End-to-end Tests
- N/A
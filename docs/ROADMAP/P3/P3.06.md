---
id: P3.06
title: System State Query Interface
estimate: 2h
status: blocked
blocked_by:
- P3.02b
- P5.02b
blocks: []
value: M
---
# [P3.06] System State Query Interface

## Summary

Expose the aggregated metrics from P3.02 via the Control Plane.

## Context

Extends the "Simple State Query" from P2.11 to include rich windowed metrics. This is the "dashboard" data (Success Rate, Throughput, etc.).

## Steps
1.  **Command**: Enhance `GetState` (or add `GetMetrics`) to pull from `TelemetryAggregator`.
2.  **Schema**:
    ```json
    {
      "services": {
        "s3": {
          "success_rate": 0.99,
          "throughput_rps": 50.0,
          "p99_latency_ms": 120
        }
      }
    }
    ```

## Definition of Done
- [ ] `TelemetryAggregator` exposes a snapshot method.
- [ ] Control plane command returns the snapshot.

## Test Plan
- [ ] **Integration**: Generate load, query metrics, verify numbers match reality.
